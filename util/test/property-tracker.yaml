title: PropertyTrackerAPI
version: "0.1"
conventions:
  multi_valued_relationships:
    entities: '#/entities/Collection'
entities:
  ServerEntity:
    abstract: true
    properties:
      created:
        type: string
        format: date-time
        readOnly: true
      creator:
        type: string
        format: URL
        readOnly: true
      modified:
        type: string
        format: date-time
        readOnly: true
      modifier:
        type: string
        format: date-time
        readOnly: true
  Entity:
    allOf:
    - $ref: '#/entities/ServerEntity'
    abstract: true
    properties:
      self:
        type: string
      kind:
        type: string      
  Collection:
    allOf:
    - $ref: '#/entities/Entity'
    properties:
      item_type: 
        type: string
      items:
        type: array
        items: 
          type: object
  PropertyTracker:
    allOf:
    - $ref: '#/entities/Entity'
    properties:
      dogs:
        description: URL of a Collection of Dogs
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Dog'
          multiplicity: O:n
      people:
        description: URL of a Collection of Persons
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Person'
          multiplicity: O:n
      bicycles:
        description: URL of a Collection of Bicycles
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Bicycle'
          multiplicity: O:n
      institutions:
        description: URL of a Collection of Institutions
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Institution'
          multiplicity: O:n
    well_known_URLs: /
    query_paths: 
    - dogs
    - "dogs;{name}"
    - bicycles
    - "bicycles;{name}"
    - people
    - "people;{name}"
    - institutions
    - "institutions;{name}"
    - "dogs;{name}/owner"
    - "bicycles;{name}/owner"
    - "institutions;{name}/assets"
    - "people;{name}/possessions"
    readOnly: true
  Dog:
    allOf:
    - $ref: '#/entities/Entity'
    properties:
      name:
        type: string
      birth_date:
        type: string
      fur_color:
        type: string
      owner:
        description: URL of a Person or Institution
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Person #Institution'
  Bicycle:
    allOf:
    - $ref: '#/entities/Entity'
    properties:
      name:
        type: string
      purchase_date:
        type: string
      paint_color: 
        type: string
      owner:
        description: URL of a Person or Institution
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Person #Institution'
  Person:
    allOf:
    - $ref: '#/entities/Entity'
    properties:
      name:
        type: string
      birth-date:
        type: string
      possessions:
        description: URL of a Collection of Dogs and Bicycles
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Dog #Bicycle'
          multiplicity: 0:n
  Institution:
    allOf:
    - $ref: '#/entities/Entity'
    properties:
      name:
        type: string
      foundation-date:
        type: string
      assets:
        description: URL of a Collection of Dogs and Bicycles
        format: uri
        type: string
        x-rapier-relationship:
          entities: '#Dog #Bicycle'
          multiplicity: 0:n
